<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pharmacy Login & Signup</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: url('../images/download.jpg') no-repeat center center/cover;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(8px);
      background: rgba(0,0,0,0.45);
    }

    .header-title {
      position: absolute;
      top: 40px;
      text-align: center;
      width: 100%;
      font-size: 34px;
      color: #e8f7ff;
      font-weight: 700;
      text-shadow: 0 2px 8px rgba(0,0,0,0.7);
    }

    .container {
      position: relative;
      width: 380px;
      background: rgba(255,255,255,0.15);
      padding: 30px;
      border-radius: 18px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(255,255,255,0.25);
      animation: fadeIn 0.9s ease;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(25px);} 
      to {opacity: 1; transform: translateY(0);} 
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #ffffff;
      font-size: 24px;
      letter-spacing: 0.5px;
    }
    input {
      display: block;          /* makes each input its own line */
      margin: 12px auto;       /* auto left/right margin centers it */
      width: 90%;              /* narrower than 100% so it looks centered */
      padding: 14px;
      border-radius: 12px;
      border: none;
      background: rgba(255,255,255,0.85);
      font-size: 15px;
    }

    button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      background: #00a8e8;
      color: white;
      font-size: 17px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #008ac4;
    }

    .toggle, .forgot {
      text-align: center;
      margin-top: 12px;
      cursor: pointer;
      color: #bfe9ff;
      font-weight: bold;
      font-size: 15px;
    }

    .msg {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
      color: #ffdddd;
      text-shadow: 0 2px 5px rgba(0,0,0,0.4);
    }

    @media (max-width: 450px) {
      .container { width: 90%; }
      .header-title { font-size: 26px; }
    }
  </style>
</head>
<body>

  <div class="header-title">Your Health, Our Priority â€“ Welcome to PharmaCare</div>

  <!-- LOGIN PAGE -->
  <div class="container" id="loginPage">
    <h2>Secure Login Portal</h2>
    <input type="email" id="loginEmail" placeholder="Registered Email Address" />
    <input type="password" id="loginPass" placeholder="Account Password" />
    <button onclick="loginUser()">Access Account</button>

    <p class="forgot" onclick="showForgot()">Forgot Password?</p>

    <p class="toggle" onclick="showSignup()">New Customer? Create Your Account</p>
    <p class="msg" id="loginMsg"></p>
  </div>

  <!-- SIGNUP PAGE -->
  <div class="container" id="signupPage" style="display:none;">
    <h2>Create Your Customer Account</h2>
    <input type="text" id="signupName" placeholder="Full Name" />
    <input type="email" id="signupEmail" placeholder="Your Active Email Address" />
    <input type="password" id="signupPass" placeholder="Create a Strong Password" />
    <button onclick="signupUser()">Register</button>

    <p class="toggle" onclick="showLogin()">Already a Member? Login Here</p>
    <p class="msg" id="signupMsg"></p>
  </div>

  <!-- FORGOT PASSWORD PAGE -->
  <div class="container" id="forgotPage" style="display:none;">
    <h2>Reset Password</h2>
    <input type="email" id="forgotEmail" placeholder="Enter Registered Email" />
    <input type="password" id="newPass" placeholder="Enter New Password" />
    <button onclick="resetPassword()">Update Password</button>

    <p class="toggle" onclick="showLogin()">Back to Login</p>
    <p class="msg" id="forgotMsg"></p>
  </div>

<script>
  let users = []; // ArrayList simulation
 
  function showSignup() {
    document.getElementById('loginPage').style.display = 'none';
    document.getElementById('forgotPage').style.display = 'none';
    document.getElementById('signupPage').style.display = 'block';
  }
 
  function showLogin() {
    document.getElementById('signupPage').style.display = 'none';
    document.getElementById('forgotPage').style.display = 'none';
    document.getElementById('loginPage').style.display = 'block';
  }
 
  function showForgot() {
    document.getElementById('loginPage').style.display = 'none';
    document.getElementById('signupPage').style.display = 'none';
    document.getElementById('forgotPage').style.display = 'block';
  }
 
  // PASSWORD VALIDATION FUNCTION
  function validatePassword(pass) {
      const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;
      return regex.test(pass);
  }
 
  function signupUser() {
    let name = document.getElementById('signupName').value.trim();
    let email = document.getElementById('signupEmail').value.trim();
    let pass = document.getElementById('signupPass').value.trim();
 
    // Empty field validation
    if(name === '' || email === '' || pass === ''){
      document.getElementById('signupMsg').innerHTML = "All fields are required to proceed!";
      return;
    }
 
    // PASSWORD RULE VALIDATION
    if(!validatePassword(pass)) {
      document.getElementById('signupMsg').innerHTML =
        "Password must be at least 8 characters with uppercase, lowercase, number & special character!";
      return;
    }
 
    // EMAIL UNIQUENESS CHECK
    let emailExists = users.some(u => u.email === email);
    if(emailExists) {
      document.getElementById('signupMsg').innerHTML = "Email ID is already registered!";
      return;
    }
 
    // STORE USER
    users.push({ name: name, email: email, password: pass });
 
    document.getElementById('signupMsg').innerHTML = "Account created successfully! Redirecting...";
 
    setTimeout(() => {
      showLogin();
    }, 1200);
  }
 
  function loginUser() {
    let email = document.getElementById('loginEmail').value.trim();
    let pass = document.getElementById('loginPass').value.trim();
    
if (email === 'reebajomin2003@gmail.com' && pass === 'Reeba@28') {
    localStorage.setItem('currentUser', 'Reeba Jomin'); // optional: store name for greeting
    window.location.href = '../../Pharmacist/pharmacist-dashboard.html';
    return; // stop further processing
  }
if (email === 'jeykrishnan@gmail.com' && pass === 'Jeykrish@28') {
    localStorage.setItem('currentUser', 'Jeykrishnan'); // optional: store name for greeting
    window.location.href = '../../admin/admin_dashboard.html';
    return; // stop further processing
  }
    let userFound = users.find(u => u.email === email && u.password === pass);
 
    if(!userFound) {
      document.getElementById('loginMsg').innerHTML = "Invalid credentials! Please sign up.";
      setTimeout(() => { showSignup(); }, 1200);
    }
    else {
      localStorage.setItem("currentUser", userFound.name);
      window.location.href="../Home/dashboard.html";
    }
  }
 
  function resetPassword() {
    let email = document.getElementById('forgotEmail').value.trim();
    let newPassword = document.getElementById('newPass').value.trim();
 
    let user = users.find(u => u.email === email);
 
    if(!user) {
      document.getElementById('forgotMsg').innerHTML = "Email not found!";
      return;
    }
 
    // Password validation on reset
    if(!validatePassword(newPassword)) {
      document.getElementById('forgotMsg').innerHTML =
        "Password must be at least 8 characters with uppercase, lowercase, number & special character!";
      return;
    }
 
    user.password = newPassword;
    document.getElementById('forgotMsg').innerHTML = "Password updated successfully!";
 
    setTimeout(() => {
      showLogin();
    }, 1200);
  }
</script>

</body>
</html>